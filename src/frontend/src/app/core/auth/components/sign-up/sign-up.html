<h1 class="text-[2.5rem]">Sign Up</h1>
<p class="my-8 text-[#718096]">Already have an account?
    <a routerLink="/auth/sign-in" class="text-[#1c4532] underline">Sign In</a>
</p>
<form (submit)="onSubmit($event)" class="flex flex-col gap-6">
    <div class="inline-block">
        <div class="relative w-24 h-24 rounded-full">
            <div class="w-full h-full rounded-[50%] overflow-hidden bg-gray-900 flex items-center justify-center">
                <img
                    [src]="profilePreview() || 'assets/default-profile.png'"
                    alt="Profile"
                    class="w-full h-full object-cover"
                />
            </div>
            <div 
                class="absolute -bottom-1.5 -right-2.5 w-10 h-10 bg-black flex items-center justify-center cursor-pointer border-[3.5] border-solid border-white rounded-full"
                (click)="fileInput.click()"
             >
                <span class="material-symbols-rounded text-white text-[1.2rem]">
                    upload
                </span>
            </div>
            <input 
                #fileInput
                id="file-input"
                type="file"
                class="hidden"
                (change)="onFileSelect($event)">
        </div>
    </div>
    <div class="flex gap-4">
        <p>
            <label for="first-name">First Name</label>
            <input 
                type="text"
                placeholder="John"
                [class.error]="fieldErrors.firstName()"
                [formField]="registerForm.firstName">
            @if(fieldErrors.firstName()) {
                <ul class="error-list">
                    @for (error of registerForm.firstName().errors(); track error.kind) {
                        <li>{{ error.message }}</li>
                    }
                </ul>
            }
        </p>
        <p>
            <label for="last-name">Last Name</label>
            <input 
                type="text"
                placeholder="Doe"
                [class.error]="fieldErrors.lastName()"
                [formField]="registerForm.lastName">
            @if(fieldErrors.lastName()) {
                <ul class="error-list">
                    @for (error of registerForm.lastName().errors(); track error.kind) {
                        <li>{{ error.message }}</li>
                    }
                </ul>
            }
        </p>
    </div>
    <div class="field">
        <label for="email">Email</label>
        <input 
            type="email" 
            placeholder="example@gmail.com"
            [class.error]="fieldErrors.email()"
            [formField]="registerForm.email">
        @if(fieldErrors.email()) {
            <ul class="error-list">
                @for (error of registerForm.email().errors(); track error.kind) {
                    <li>{{ error.message }}</li>
                }
            </ul>
        }
    </div>
    <div class="field">
        <label for="password">Password</label>
        <div class="relative flex items-center">
            <input
                [type]="showPassword() ? 'text' : 'password'"
                placeholder="&@^ncq2"
                [class.error]="fieldErrors.password()"
                [formField]="registerForm.password"
                />
            <span
                class="material-symbols-rounded toggle-icon"
                (click)="togglePassword()"
                >
                {{ showPassword() ? 'visibility_off' : 'visibility' }}
            </span>
        </div>
        @if(fieldErrors.password()) {
            <ul class="error-list">
                @for (error of registerForm.password().errors(); track error.kind) {
                    <li>{{ error.message }}</li>
                }
            </ul>
        }
    </div>
    <div class="field">
        <label for="confirm-password">Confirm Password</label>
        <div class="relative flex items-center">
            <input
                [type]="showConfirmPassword() ? 'text' : 'password'"
                placeholder="&@^ncq2"
                [class.error]="fieldErrors.confirmPassword()"
                [formField]="registerForm.confirmPassword"
                class="w-full pr-10"
            />
            <span
                class="material-symbols-rounded toggle-icon"
                (click)="toggleConfirmPassword()"
            >
                {{ showConfirmPassword() ? 'visibility_off' : 'visibility' }}
            </span>
        </div>
        @if(fieldErrors.confirmPassword()) {
            <ul class="error-list">
                @for (error of registerForm.confirmPassword().errors(); track error.kind) {
                    <li>{{ error.message }}</li>
                }
            </ul>
        }
    </div> 
    <button 
        type="submit"
        [disabled]="isLoading() || registerForm().invalid()"
        class="font-bold bg-[#1c4532] text-white border-none py-4 text-[0.9rem] rounded-lg"
    >
        @if(isLoading()) {
            <span class="material-symbols-rounded animate-spin">
                progress_activity
            </span>
        } @else {
            Sign Up
        }
    </button>
</form>