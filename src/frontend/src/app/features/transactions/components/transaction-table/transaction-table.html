<div 
    class="w-full gray-border overflow-x-scroll xl:overflow-hidden flex flex-col rounded-md bg-white"
>
    <table class="w-full border-collapse">
        <thead class="bg-gray-100 border-b border-solid border-[#c5c5c5]">
            <tr>
                @for(column of columns(); track column.key) {
                    <th>{{ column.label }}</th>
                }
            </tr>
        </thead>
        <tbody>
            @if(isLoading()) {
                @for(skeleton of [1,2,3,4,5,6,7,8,9,10]; track skeleton) {
                    <tr class="border-b border-solid border-[#cacaca] animate-pulse">
                        @for(column of columns(); track column.key) {
                            <td><div class="skeleton"></div></td>
                        }
                    </tr>
                }
            } @else {
                @for(t of transactions(); track t.id) {
                    <tr class="border-b border-solid border-[#cacaca] hover:bg-gray-50 transition-colors duration-150">
                        @for(column of columns(); track column.key) {
                            <td>
                                @switch (column.key) {
                                    @case ('transactionDate') {
                                        <p>{{ t.transactionDate }}</p>
                                    }

                                    @case ('dateCreated') {
                                        <p>{{ t.createdAt }}</p>
                                    }

                                    @case ('title') {
                                        <p class="font-medium">{{ t.name }}</p>
                                    }

                                    @case ('category') {
                                        <p>{{ t.category.name }}</p>
                                    }

                                    @case ('type') {
                                        <p 
                                            class="text-[0.6rem] inline-flex items-center px-2 py-1 rounded-full font-medium"
                                            [class]="t.transactionType | transactionTypeColor:true"
                                        >
                                            {{ t.transactionType | uppercase }}
                                        </p>
                                    }

                                    @case ('amount') {
                                        <p 
                                            [class]="t.transactionType | transactionTypeColor:false"
                                        >
                                            {{ t.transactionType | transactionAmountSign }}{{ t.amount | currency }}
                                        </p>
                                    }

                                    @case ('paymentMethod') {
                                        <p>{{ t.paymentType | addWhitespace }}</p>
                                    }

                                    @case ('actions') {
                                        <div 
                                            role="button" 
                                            class="relative flex items-center cursor-pointer"
                                            (click)="toggleModalId(t.id)"
                                        >
                                            <span class="material-symbols-rounded">
                                                more_horiz
                                            </span>
                                        </div>

                                        @if(openModalId() === t.id) {
                                            <div class="absolute right-20 mt-2 bg-white shadow-lg rounded-md py-1.5 px-1 z-10 gray-border">
                                                <button 
                                                    class="w-full text-left rounded-sm pl-3 pr-20 py-1 hover:bg-gray-100 flex items-center gap-2.5"
                                                    (click)="onEdit(t.id)"
                                                >
                                                    <span class="material-symbols-rounded text-sm">edit</span>
                                                    Edit
                                                </button>
                                                <button 
                                                    class="w-full text-left px-3 py-1 rounded-sm hover:bg-gray-100 flex items-center gap-2 text-red-600"
                                                    (click)="onDelete(t.id)"
                                                >
                                                    <span class="material-symbols-rounded">delete</span>
                                                    Delete
                                                </button>
                                            </div>
                                        }
                                    }
                                }
                            </td>
                        } 
                    </tr>
                }
            }
        </tbody>
    </table>
</div>