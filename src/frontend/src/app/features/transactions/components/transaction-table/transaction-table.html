<h5>All Transaction</h5>
<div class="filters">
    <div class="search-bar">
        <span class="material-symbols-outlined">
            search
        </span>
        <input type="text" placeholder="Search Transactions...">
    </div>
    <select class="types">
        <option value="" selected>All Types</option>
        <option value="1">Income</option>
        <option value="2">Expense</option>
    </select>
    <select class="categories">
        <option value="" selected>All Categories</option>
        @for(c of categories(); track c.categoryId) {
            <option [value]="c.name">{{ c.name }}</option>
        }
    </select>
    <div class="amount">
        <div class="amount-header" (click)="toggleAmountModal()">
            <p>Amount</p>
            <span class="material-symbols-outlined">
                keyboard_arrow_down
            </span>
        </div>
        <div class="amount-modal" [class.open]="isAmountModalVisible()">
            <div class="inputs">
                <input type="number" placeholder="Min Amount">
                <input type="number" placeholder="Max Amount">
            </div>
            <div class="actions">
                <button class="cancel" (click)="toggleAmountModal()">Cancel</button>
                <button class="select" (click)="toggleAmountModal()">Select</button>
            </div>
        </div>
    </div>
    <div class="date">
        <div class="date-header" (click)="toggleDateModal()">
            <span class="material-symbols-outlined">
                calendar_today
            </span>
            <p>Date</p>
        </div>
        <div class="date-modal" [class.open]="isDateModalVisible()">
            <div class="inputs">
                <input type="date" placeholder="From">
                <input type="date" placeholder="To">
            </div>
            <div class="actions">
                <button class="cancel" (click)="toggleDateModal()">Cancel</button>
                <button class="select" (click)="toggleDateModal()">Select</button>
            </div>
        </div>
    </div>
</div>
<table>
    <thead>
        <tr>
            <th>DATE</th>
            <th>TYPE</th>
            <th>CATEGORY</th>
            <th>TRANSACTION</th>
            <th>PAYMENT METHOD</th>
            <th>AMOUNT</th>
            <th>&nbsp;</th>
        </tr>
    </thead>
    <tbody>
        @for(t of transactions(); track t.transactionId) {
            <tr>
                <td>
                    <p>{{ t.transactionDate }}</p>
                </td>
                <td>
                    <p>{{ TransactionTypeMap[t.transactionType] }}</p>
                </td>
                <td>
                    <p>{{ categoryMap().get(t.categoryId) ?? 'Unknown' }}</p>
                </td>
                <td>
                    <p>{{ t.name }}</p>
                </td>
                <td>
                    <p>{{ PaymentTypeMap[t.paymentType] }}</p>
                </td>
                <td>
                    <p 
                        [style.color]="t.transactionType === 1 ? 'green' : 'red'"
                    >
                        {{ t.transactionType == 1 ? '+' : '-'}}{{ t.amount | currency }}
                    </p>
                </td>
                <td>
                    <div class="buttons">
                        <button (click)="onDelete(t.transactionId)">
                            <span class="material-symbols-outlined">
                                delete
                            </span>
                        </button>
                        <button (click)="onEdit(t.transactionId)">
                            <span class="material-symbols-outlined">
                                edit
                            </span>
                        </button>
                    </div>
                </td>
            </tr>
        }
    </tbody>
</table>